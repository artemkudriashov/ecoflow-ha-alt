# EcoFlow Cloud Alt (EU + Alternator Charger)

Home Assistant —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–ª—è –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ EcoFlow –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é **EU API** —Ç–∞ **Alternator Charger**.

–ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ [hassio-ecoflow-cloud-US](https://github.com/snell-evan-itt/hassio-ecoflow-cloud-US) –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è–º–∏ –¥–ª—è —î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ **EU API endpoint** - –ø—Ä–∞—Ü—é—î –∑ —î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏–º–∏ EcoFlow –∞–∫–∞—É–Ω—Ç–∞–º–∏  
‚úÖ **Alternator Charger (500W/800W)** - **–ü–û–í–ù–ê –ü–Ü–î–¢–†–ò–ú–ö–ê** –∑ –∫–µ—Ä—É–≤–∞–Ω–Ω—è–º! ‚ö°  
‚úÖ **–í—Å—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó** - Delta, River, PowerStream, Wave, Glacier —Ç–æ—â–æ  
‚úÖ **Production-ready** - –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö  

## üîß –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ß–µ—Ä–µ–∑ HACS (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

1. HACS ‚Üí Integrations ‚Üí ‚ãÆ (—Ç—Ä–∏ –∫—Ä–∞–ø–∫–∏) ‚Üí Custom repositories
2. –î–æ–¥–∞–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π: `https://github.com/artemkudriashov/ecoflow-ha-alt`
3. Category: **Integration**
4. –ù–∞—Ç–∏—Å–Ω–∏ **Add**
5. –ó–Ω–∞–π–¥–∏ **"EcoFlow Cloud Alt"** –≤ —Å–ø–∏—Å–∫—É
6. **Download**
7. **Restart Home Assistant**
8. Settings ‚Üí Devices & Services ‚Üí **Add Integration**
9. –®—É–∫–∞–π **"EcoFlow Cloud Alt"**
10. –í–≤–µ–¥–∏ —Å–≤–æ—ó EcoFlow API –∫–ª—é—á—ñ

### –í—Ä—É—á–Ω—É

1. –°–∫–æ–ø—ñ—é–π –ø–∞–ø–∫—É `custom_components/ecoflow_cloud_alt` –≤ —Å–≤–æ—é —Ç–µ–∫—É `custom_components/`
2. Restart Home Assistant
3. Settings ‚Üí Devices & Services ‚Üí Add Integration ‚Üí EcoFlow Cloud Alt

## üîë API –ö–ª—é—á—ñ

–û—Ç—Ä–∏–º–∞–π –∫–ª—é—á—ñ –∑ [EcoFlow Developer Portal](https://developer.ecoflow.com/us/security):

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Ç–æ–π —Å–∞–º–∏–π –∞–∫–∞—É–Ω—Ç —â–æ –≤ EcoFlow app)
2. –°—Ç–≤–æ—Ä–∏ API –∫–ª—é—á—ñ
3. –°–∫–æ–ø—ñ—é–π **AccessKey** —Ç–∞ **SecretKey**

**‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:** –î–ª—è —î–≤—Ä–æ–ø–µ–π—Å—å–∫–∏—Ö –∞–∫–∞—É–Ω—Ç—ñ–≤ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **EU endpoint** (`api-e.ecoflow.com`).

## üì± –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó

### –í—Å—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó:
- **Delta Series**: Delta Pro, Delta 2, Delta 2 Max, Delta Mini
- **River Series**: River 2, River 2 Max, River 2 Pro, River Max, River Pro
- **PowerStream** 600W/800W
- **Smart Plug**
- **Wave 2** / **Wave 3** (–∫–æ–Ω–¥–∏—Ü—ñ–æ–Ω–µ—Ä–∏)
- **Glacier** (—Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∏)

### ‚ö° Alternator Charger (500W/800W) - –ü–û–í–ù–ê –ü–Ü–î–¢–†–ò–ú–ö–ê! üéâ

**–£–Ω—ñ–∫–∞–ª—å–Ω–∞ –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å —Ü—ñ—î—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó!**

–Ñ–¥–∏–Ω–∞ Home Assistant —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ **–ø–æ–≤–Ω–∏–º –∫–µ—Ä—É–≤–∞–Ω–Ω—è–º** Alternator Charger —á–µ—Ä–µ–∑ protobuf MQTT.

#### –©–æ –ø—Ä–∞—Ü—é—î ‚úÖ

**–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (real-time):**
- üîã Battery Level (%)
- üå°Ô∏è Temperature (¬∞C)
- ‚ö° Alternator Power (W) - –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –∑–∞—Ä—è–¥—É –≤—ñ–¥ –∞–≤—Ç–æ
- üîå Station Power (W) - –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –Ω–∞ –≤–∏—Ö–æ–¥—ñ
- üöó Car Battery Voltage (V)
- üìä Rated Power (W) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å
- ‚è±Ô∏è Charging Time (min)
- üü¢ Status (online/offline)
- üì∂ WiFi Signal (RSSI)

**–ö–µ—Ä—É–≤–∞–Ω–Ω—è (–ø—Ä–∞—Ü—é—î!):**
- üî¥ **Start/Stop Switch** - —É–≤—ñ–º–∫–Ω—É—Ç–∏/–≤–∏–º–∫–Ω—É—Ç–∏ –∑–∞—Ä—è–¥–∫—É
- üéõÔ∏è **Operation Mode** - –≤–∏–±—ñ—Ä —Ä–µ–∂–∏–º—É —Ä–æ–±–æ—Ç–∏:
  - **Charge** - –∑–∞—Ä—è–¥–∫–∞ —Å—Ç–∞–Ω—Ü—ñ—ó –≤—ñ–¥ –∞–≤—Ç–æ (—á–µ—Ä–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä)
  - **Battery Maintenance** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∑–∞—Ä—è–¥—É –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó
  - **Reverse Charge** - –∑–∞—Ä—è–¥–∫–∞ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó –≤—ñ–¥ —Å—Ç–∞–Ω—Ü—ñ—ó
- ‚öôÔ∏è **Power Limit** (0-800W) - –æ–±–º–µ–∂–µ–Ω–Ω—è –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ –∑–∞—Ä—è–¥—É
- üîå **Start Voltage** (11-30V) - –ø–æ—Ä—ñ–≥ –Ω–∞–ø—Ä—É–≥–∏ –¥–ª—è –∞–≤—Ç–æ—Å—Ç–∞—Ä—Ç—É
- üìè **Cable Length** (0-10m) - –∫–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—è –≤—Ç—Ä–∞—Ç –Ω–∞ –∫–∞–±–µ–ª—ñ

#### –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –≤ –¥–æ—Ä–æ–∑—ñ:**
```yaml
automation:
  - alias: "–ê–≤—Ç–æ-–∑–∞—Ä—è–¥–∫–∞ —Å—Ç–∞–Ω—Ü—ñ—ó –≤—ñ–¥ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞"
    trigger:
      - platform: numeric_state
        entity_id: sensor.alternator_charger_car_battery_voltage
        above: 13.5  # –î–≤–∏–≥—É–Ω –ø—Ä–∞—Ü—é—î
    condition:
      - condition: numeric_state
        entity_id: sensor.alternator_charger_battery_level
        below: 80
    action:
      - service: switch.turn_on
        entity_id: switch.alternator_charger_start_stop
      - service: select.select_option
        data:
          entity_id: select.alternator_charger_operation_mode
          option: "Charge"
```

**–ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó:**
```yaml
automation:
  - alias: "–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó –≤–Ω–æ—á—ñ"
    trigger:
      - platform: time
        at: "02:00:00"
    condition:
      - condition: numeric_state
        entity_id: sensor.alternator_charger_car_battery_voltage
        below: 12.4  # –†–æ–∑—Ä—è–¥–∂–µ–Ω–∞ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—è
    action:
      - service: switch.turn_on
        entity_id: switch.alternator_charger_start_stop
      - service: select.select_option
        data:
          entity_id: select.alternator_charger_operation_mode
          option: "Battery Maintenance"
```

## üÜö –í—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

| –û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å | –û—Ä–∏–≥—ñ–Ω–∞–ª (US) | EcoFlow Cloud Alt |
|-------------|---------------|-------------------|
| API Endpoint | US (`api-a`) | **EU (`api-e`)** |
| Alternator Charger | ‚ùå –ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è | ‚úÖ **–ü–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞** (—á–∏—Ç–∞–Ω–Ω—è + –∫–µ—Ä—É–≤–∞–Ω–Ω—è) |
| Protobuf MQTT | ‚ùå | ‚úÖ –ó XOR —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è–º |
| –ü—Ä–∏—Å—Ç—Ä–æ—ó –±–µ–∑ `productName` | ‚ùå –í—ñ–¥–∫–∏–¥–∞—î | ‚úÖ –ê–≤—Ç–æ-–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
| Domain | `ecoflow_cloud` | `ecoflow_cloud_alt` |

**Domain –∑–º—ñ–Ω–µ–Ω–æ** —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ - –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –æ–±–∏–¥–≤—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

## üõ†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

1. Settings ‚Üí Devices & Services
2. –ó–Ω–∞–π–¥–∏ **EcoFlow Cloud Alt**
3. –ù–∞—Ç–∏—Å–Ω–∏ **Configure**
4. –û–±–µ—Ä–∏ –ø—Ä–∏—Å—Ç—Ä–æ—ó —è–∫—ñ —Ö–æ—á–µ—à –¥–æ–¥–∞—Ç–∏
5. –ù–∞–ª–∞—à—Ç—É–π –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):
   - Refresh period (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 5 —Å–µ–∫)
   - Power step (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 100W)

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –Ω–µ –±–∞—á–∏—Ç—å Alternator Charger

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
1. –ü—Ä–∏—Å—Ç—Ä—ñ–π offline - –ø–µ—Ä–µ–≤—ñ—Ä WiFi –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤ EcoFlow app
2. –ù–µ –ø—É–±–ª—ñ–∫—É—î MQTT –¥–∞–Ω—ñ - –º–æ–∂–ª–∏–≤–æ —Ç—Ä–µ–±–∞ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–∞—Ä—è–¥–∫—É —á–µ—Ä–µ–∑ app
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å—Ç–∞—Ä–∏–π firmware - –æ–Ω–æ–≤—ñ—Ç—å —á–µ—Ä–µ–∑ app

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
1. Settings ‚Üí System ‚Üí Logs
2. –®—É–∫–∞–π `ecoflow_cloud_alt`
3. –î–∏–≤–∏—Å—å —á–∏ —î `Subscribed to MQTT topics` –∑ `F371...` (—Å–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä)
4. –î–∏–≤–∏—Å—å —á–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç—å `Message for F371...`

### –ö–µ—Ä—É–≤–∞–Ω–Ω—è –Ω–µ –ø—Ä–∞—Ü—é—î

**–Ø–∫—â–æ –±–∞—á–∏—à –¥–∞–Ω—ñ –∞–ª–µ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ–º–∞–Ω–¥–∏:**

1. **–ü–µ—Ä–µ–≤—ñ—Ä –ª–æ–≥–∏:** `Settings ‚Üí System ‚Üí Logs ‚Üí ecoflow_cloud_alt`
2. –®—É–∫–∞–π `Encoded Alternator command` - —è–∫—â–æ –±–∞—á–∏—à, –∫–æ–º–∞–Ω–¥–∞ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∞
3. –®—É–∫–∞–π `Command response detected` - —è–∫—â–æ –±–∞—á–∏—à, –ø—Ä–∏—Å—Ç—Ä—ñ–π –≤—ñ–¥–ø–æ–≤—ñ–≤
4. –Ø–∫—â–æ –±–∞—á–∏—à `Failed to decode` - —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è ACK –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

**–í–∞–∂–ª–∏–≤–æ:** Alternator Charger –º–æ–∂–µ **—ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏** —è–∫—â–æ:
- –ù–∞–ø—Ä—É–≥–∞ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó –∑–∞ –º–µ–∂–∞–º–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ (< 11V –∞–±–æ > 30V)
- –ü—Ä–∏—Å—Ç—Ä—ñ–π –≤ —Ä–µ–∂–∏–º—ñ –∑–∞—Ö–∏—Å—Ç—É (–ø–µ—Ä–µ–≥—Ä—ñ–≤, –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
- WiFi –∑'—î–¥–Ω–∞–Ω–Ω—è –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–µ

### –ü–æ–∫–∞–∑—É—î "Unavailable"

Alternator Charger **–º–æ–∂–µ –Ω–µ –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –ø–æ—Å—Ç—ñ–π–Ω–æ** - —Ç—ñ–ª—å–∫–∏ –ø—ñ–¥ —á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∞–±–æ –∫–æ–ª–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ –∞–≤—Ç–æ. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏—Å—Ç—Ä–æ—é.

**–©–æ–± –ø—Ä–∏—Å—Ç—Ä—ñ–π "–ø—Ä–æ–∫–∏–Ω—É–≤—Å—è":**
1. –ü—ñ–¥–∫–ª—é—á–∏ –¥–æ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó
2. –û–¥–∏–Ω —Ä–∞–∑ —É–≤—ñ–º–∫–Ω–∏ —á–µ—Ä–µ–∑ EcoFlow app
3. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –ø–æ–±–∞—á–∏—Ç—å –ø—Ä–∏—Å—Ç—Ä—ñ–π

## üìö –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ü—Ä–æ—Ç–æ–∫–æ–ª–∏

- **Delta/River/PowerStream**: JSON —á–µ—Ä–µ–∑ MQTT
- **Alternator Charger**: **Protobuf —á–µ—Ä–µ–∑ MQTT** –∑ XOR —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è–º

### MQTT –¢–æ–ø—ñ–∫–∏

**–î–ª—è Alternator Charger (Private API):**
```
/app/{userId}/{deviceSN}/thing/property/get     # –ß–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
/app/{userId}/{deviceSN}/thing/property/set     # –ö–æ–º–∞–Ω–¥–∏
/app/device/property/{deviceSN}                  # Heartbeat (–¥–∞–Ω—ñ)
```

**–î–ª—è —ñ–Ω—à–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ (Public API):**
```
/open/{clientId}/{deviceSN}/quota               # –î–∞–Ω—ñ –∑ –ø—Ä–∏—Å—Ç—Ä–æ—é
/open/{clientId}/{deviceSN}/set                 # –ö–æ–º–∞–Ω–¥–∏ –¥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é
/open/{clientId}/{deviceSN}/set_reply           # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥
/open/{clientId}/{deviceSN}/status              # –°—Ç–∞—Ç—É—Å –ø—Ä–∏—Å—Ç—Ä–æ—é
```

### Protobuf —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Alternator Charger)

**Heartbeat (—á–∏—Ç–∞–Ω–Ω—è):**
```protobuf
message alternatorHeartbeat {
  optional int32 status1 = 1;
  optional int32 temp = 102;
  optional float alternatorPower = 105;  // XOR encrypted with seq
  optional float carBatVolt = 139;
  optional float stationPower = 425;
  optional int32 operationMode = 581;    // 1=Charge, 2=Maintenance, 3=Reverse
  optional int32 startStop = 597;        // 0=off, 1=on
  optional float permanentWatts = 598;
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

**Commands (–∫–µ—Ä—É–≤–∞–Ω–Ω—è):**
```protobuf
message setMessage {
  setHeader header = 1;
}

message setHeader {
  optional alternatorSet pdata = 1;  // NOT XOR encrypted!
  int32 src = 2;                     // 32
  int32 dest = 3;                    // 20
  int32 cmd_func = 8;                // 254
  int32 cmd_id = 9;                  // 17
  int32 seq = 14;                    // timestamp
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}

message alternatorSet {
  optional int32 operationMode = 116;  // NOTE: Different field# than heartbeat!
  optional int32 startStop = 122;
  optional float permanentWatts = 123;
  optional int32 startVoltage = 137;   // * 10 (110 = 11.0V)
  // ... —ñ–Ω—à—ñ –ø–æ–ª—è
}
```

**–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- **XOR —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è** —Ç—ñ–ª—å–∫–∏ –¥–ª—è heartbeat (pdata XOR seq)
- **–†—ñ–∑–Ω—ñ field numbers** –¥–ª—è –∫–æ–º–∞–Ω–¥ (116/122/123) vs heartbeat (581/597/598)
- Command responses **–ù–ï —à–∏—Ñ—Ä—É—é—Ç—å—Å—è** XOR (seq > 100000000 = timestamp)
- –ó–Ω–∞–∫ –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ **—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∏–π** (EcoFlow —Ä–µ–ø–æ—Ä—Ç—É—î output —è–∫ –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏–π)

–ü–æ–≤–Ω–∏–π –∫–æ–¥: `devices/proto/alternator_pb.py`

## üêõ –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏

### Alternator Charger —ñ–Ω–æ–¥—ñ –≤—Ç—Ä–∞—á–∞—î –∑'—î–¥–Ω–∞–Ω–Ω—è

**–°–∏–º–ø—Ç–æ–º:** Entity —Å—Ç–∞—î `unavailable`, –ø–æ—Ç—ñ–º —á–µ—Ä–µ–∑ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è.

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏—Å—Ç—Ä—ñ–π –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –≤ —Ä–µ–∂–∏–º –µ–Ω–µ—Ä–≥–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è.

**–†—ñ—à–µ–Ω–Ω—è:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞. –ü—Ä–∏—Å—Ç—Ä—ñ–π "–ø—Ä–æ–∫–∏–Ω–µ—Ç—å—Å—è" –ø—Ä–∏:
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—ñ –¥–æ –∞–≤—Ç–æ –±–∞—Ç–∞—Ä–µ—ó
- –ó–º—ñ–Ω—ñ –Ω–∞–ø—Ä—É–≥–∏ –Ω–∞ –≤—Ö–æ–¥—ñ
- –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—ñ —á–µ—Ä–µ–∑ app

### Power –ø–æ–∫–∞–∑—É—î 0W –∫–æ–ª–∏ –ø—Ä–∏—Å—Ç—Ä—ñ–π –ø—Ä–∞—Ü—é—î

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∏–∑—å–∫–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (< 10W) –º–æ–∂–µ –æ–∫—Ä—É–≥–ª—é–≤–∞—Ç–∏—Å—å –¥–æ 0.

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:** –î–∏–≤–∏—Å—å `Car Battery Voltage` - —è–∫—â–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, –∑–∞—Ä—è–¥–∫–∞ –ø—Ä–∞—Ü—é—î.

## üôè –ü–æ–¥—è–∫–∏

- –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è: [@snell-evan-itt/hassio-ecoflow-cloud-US](https://github.com/snell-evan-itt/hassio-ecoflow-cloud-US)
- –ë–∞–∑–æ–≤–∞ –≤–µ—Ä—Å—ñ—è: [@tolwi/hassio-ecoflow-cloud](https://github.com/tolwi/hassio-ecoflow-cloud)
- **Alternator Charger protobuf:** [@foxthefox/ioBroker.ecoflow-mqtt](https://github.com/foxthefox/ioBroker.ecoflow-mqtt) - –¥—è–∫—É—é –∑–∞ reverse engineering! üôè

## üìù Changelog

### v1.1.0 (2026-02-22) - Alternator Charger WORKS! üéâ

**–ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- ‚úÖ **–ü–æ–≤–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è Alternator Charger** (start/stop, —Ä–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π protobuf encoding –∑ full setMessage structure
- ‚úÖ Command response decoding (–±–µ–∑ XOR –¥–ª—è timestamp seq)
- ‚úÖ –Ü–Ω–≤–µ—Ä—Å—ñ—è –∑–Ω–∞–∫—É –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ (output —Ç–µ–ø–µ—Ä –ø–æ–∑–∏—Ç–∏–≤–Ω–∏–π)

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- üêõ Field numbers –¥–ª—è –∫–æ–º–∞–Ω–¥ (116/122/123 –∑–∞–º—ñ—Å—Ç—å 581/597/598)
- üêõ BaseSelectEntity type –≤ alternator_charger.py
- üêõ –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è command responses (–≤–µ–ª–∏–∫–∏–π seq > 100M –±–µ–∑ XOR)

**–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:**
- –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—ñ [ioBroker.ecoflow-mqtt](https://github.com/foxthefox/ioBroker.ecoflow-mqtt)
- 6+ –≥–æ–¥–∏–Ω reverse engineering üòÖ
- –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º—É Alternator Charger 800W

### v1.0.0 - –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä–µ–ª—ñ–∑
- EU API endpoint
- –ë–∞–∑–æ–≤–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ Alternator Charger (—Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è)
- –í—Å—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤—ñ–ª—å–Ω–æ!

## ‚ö†Ô∏è Disclaimer

–¶–µ –Ω–µ–æ—Ñ—ñ—Ü—ñ–π–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è, –Ω–µ –ø–æ–≤'—è–∑–∞–Ω–∞ –∑ –∫–æ–º–ø–∞–Ω—ñ—î—é EcoFlow. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–∞ –≤–ª–∞—Å–Ω–∏–π —Ä–∏–∑–∏–∫.

EcoFlow¬Æ —Ç–∞ –Ω–∞–∑–≤–∏ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —î —Ç–æ—Ä–≥–æ–≤–∏–º–∏ –º–∞—Ä–∫–∞–º–∏ EcoFlow Inc.

---

**–ü—ñ–¥—Ç—Ä–∏–º–∫–∞:** [Issues](https://github.com/artemkudriashov/ecoflow-ha-alt/issues)  
**–ê–≤—Ç–æ—Ä:** [@artemkudriashov](https://github.com/artemkudriashov)  

**‚≠ê –Ø–∫—â–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤–∞–º –¥–æ–ø–æ–º–æ–≥–ª–∞ - –ø–æ—Å—Ç–∞–≤—Ç–µ –∑—ñ—Ä–æ—á–∫—É –Ω–∞ GitHub! ‚≠ê**
